"use strict";(self["webpackChunkwaffle_backend"]=self["webpackChunkwaffle_backend"]||[]).push([[985],{985:function(o,e,a){a.r(e),a.d(e,{default:function(){return L}});var s=a(3396),l=a(9242);const t=o=>((0,s.dD)("data-v-41706fc5"),o=o(),(0,s.Cn)(),o),n={class:"container mt-5"},r=["src"],i=t((()=>(0,s._)("p",{class:"mt-5 text-white fs-2"},"歡迎回來 !",-1))),g={class:"d-flex align-items-center"},d=["src"],h=t((()=>(0,s._)("span",null,null,-1))),c=t((()=>(0,s._)("span",null,null,-1))),p=t((()=>(0,s._)("span",null,null,-1))),u=t((()=>(0,s._)("span",null,null,-1))),m=t((()=>(0,s._)("span",null,null,-1))),w=t((()=>(0,s._)("span",null,null,-1))),_=t((()=>(0,s._)("span",null,null,-1))),f=t((()=>(0,s._)("span",null,null,-1))),y=t((()=>(0,s._)("span",null,null,-1))),$=t((()=>(0,s._)("span",null,null,-1))),k=t((()=>(0,s._)("span",null,null,-1))),v=t((()=>(0,s._)("span",null,null,-1)));function C(o,e,a,t,C,M){const V=(0,s.up)("el-input"),D=(0,s.up)("el-form-item"),F=(0,s.up)("el-form");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(F,{ref:"addBank_Form",model:C.addForm_Data,rules:C.rules,class:"demo-ruleForm d-flex flex-column align-items-center justify-content-center"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:C.logoSrc,alt:"#",style:{width:"200px",height:"200px","border-radius":"50%"}},null,8,r),i,(0,s.Wm)(D,{label:"帳號",prop:"phone",class:"addInput_style"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{class:"contentName_style",modelValue:C.addForm_Data.phone,"onUpdate:modelValue":e[0]||(e[0]=o=>C.addForm_Data.phone=o),placeholder:"請輸入"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(D,{label:"密碼",prop:"password",class:"addInput_style"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{class:"contentName_style",modelValue:C.addForm_Data.password,"onUpdate:modelValue":e[1]||(e[1]=o=>C.addForm_Data.password=o),placeholder:"請輸入",type:"password"},null,8,["modelValue"])])),_:1}),(0,s._)("div",g,[(0,s.Wm)(D,{label:"驗證碼",prop:"captcha",class:"captchaInput_style"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{class:"contentName_style",modelValue:C.addForm_Data.captcha,"onUpdate:modelValue":e[2]||(e[2]=o=>C.addForm_Data.captcha=o),placeholder:"請輸入"},null,8,["modelValue"])])),_:1}),(0,s._)("div",{onClick:e[3]||(e[3]=o=>M.reload_Captcha()),onKeydown:e[4]||(e[4]=o=>M.reload_Captcha())},[C.isRouterAlive?((0,s.wg)(),(0,s.iD)("img",{key:0,src:`/captcha.svg?=${(new Date).getTime()}`,alt:"#"},null,8,d)):(0,s.kq)("",!0)],32)]),!0===C.isGoogleLogin?((0,s.wg)(),(0,s.j4)(D,{key:0,label:"Google驗證碼",prop:"googleVerifyCode",class:"addInput_style"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{class:"contentName_style",modelValue:C.addForm_Data.googleVerifyCode,"onUpdate:modelValue":e[5]||(e[5]=o=>C.addForm_Data.googleVerifyCode=o),placeholder:"請輸入",type:"password"},null,8,["modelValue"])])),_:1})):(0,s.kq)("",!0),null===C.isGoogleLogin?((0,s.wg)(),(0,s.iD)("a",{key:1,href:"#",class:"px-5",onClick:e[6]||(e[6]=(0,l.iM)((o=>M.login()),["prevent"]))},[h,c,p,u,(0,s.Uk)(" 登入 ")])):(0,s.kq)("",!0),!1===C.isGoogleLogin?((0,s.wg)(),(0,s.iD)("a",{key:2,href:"#",class:"px-5",onClick:e[7]||(e[7]=(0,l.iM)((o=>M.login()),["prevent"]))},[m,w,_,f,(0,s.Uk)(" 登入 ")])):(0,s.kq)("",!0),!0===C.isGoogleLogin?((0,s.wg)(),(0,s.iD)("a",{key:3,href:"#",class:"px-5",onClick:e[8]||(e[8]=(0,l.iM)((o=>M.login_withGoogle()),["prevent"]))},[y,$,k,v,(0,s.Uk)(" 登入 ")])):(0,s.kq)("",!0)])),_:1},8,["model","rules"])])}a(7658);var M=a(4806),V=a.n(M),D={provide(){return{reload_captcha:this.reload_Captcha}},data(){return{isRouterAlive:!0,addForm_Data:{phone:"",password:"",captcha:"",googleVerifyCode:null},logoSrc:"",googleForm_data:{phone:""},isGoogleLogin:null,rules:{phone:[{required:!0,message:"請輸入帳號",trigger:"blur"}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}],captcha:[{required:!0,message:"請輸入驗證碼",trigger:"blur"}]},wrongMsg:{phone:"",password:"",captcha:"",googleVerifyCode:""}}},methods:{getSiteInfo(){this.$http.get("/open/siteInfo").then((o=>{console.log(o.data.data),this.logoSrc=o.data.data.logo}))},checkGoogleLogin(){this.$http.post("/open/checkIsGoogleLogin",this.googleForm_data).then((o=>{console.log(o.data.data),this.isGoogleLogin=o.data.data.isGoogleLogin}))},login(){this.googleForm_data.phone=this.addForm_Data.phone,this.checkGoogleLogin(),this.$http.post("/open/login",this.addForm_Data).then((o=>{const e=o.data.msg;console.log(this.isGoogleLogin,"驗證碼是否啟動"),!1===this.isGoogleLogin?200===o.data.code?(console.log(o.data.msg),this.$swal.fire("登入成功!","登入成功","success"),this.$router.push("/")):422===o.data.code?(this.wrongMsg.phone=V().findKey(e,["param","phone"]),console.log(this.wrongMsg.phone),void 0!==this.wrongMsg.phone&&this.$swal.fire("登入失敗!",`${o.data.msg.phone.msg}`,"error"),this.wrongMsg.password=V().findKey(e,["param","password"]),console.log(this.wrongMsg.password),void 0!==this.wrongMsg.password&&this.$swal.fire("登入失敗!",`${o.data.msg.password.msg}`,"error"),this.wrongMsg.captcha=V().findKey(e,["param","captcha"]),console.log(this.wrongMsg.captcha),void 0!==this.wrongMsg.captcha?this.$swal.fire("登入失敗!",`${o.data.msg.captcha.msg}`,"error"):500===o.data.code&&(console.log(o.data.msg),this.$swal.fire("登入失敗!",`${o.data.msg}`,"error")),this.reload_Captcha()):(console.log(o.data.msg),this.$swal.fire("登入失敗!",`${o.data.msg}`,"error"),this.reload_Captcha()):(console.log(this.isGoogleLogin,"啟動"),this.isGoogleLogin=!0)}))},login_withGoogle(){this.$http.post("/open/login",this.addForm_Data).then((o=>{const e=o.data.msg;200===o.data.code?(console.log(o.data.msg),this.$swal.fire("登入成功!","登入成功","success"),this.$router.push("/")):422===o.data.code?(this.wrongMsg.phone=V().findKey(e,["param","phone"]),console.log(this.wrongMsg.phone),void 0!==this.wrongMsg.phone&&this.$swal.fire("登入失敗!",`${o.data.msg.phone.msg}`,"error"),this.wrongMsg.password=V().findKey(e,["param","password"]),console.log(this.wrongMsg.password),void 0!==this.wrongMsg.password&&this.$swal.fire("登入失敗!",`${o.data.msg.password.msg}`,"error"),this.wrongMsg.captcha=V().findKey(e,["param","captcha"]),console.log(this.wrongMsg.captcha),void 0!==this.wrongMsg.captcha&&this.$swal.fire("登入失敗!",`${o.data.msg.captcha.msg}`,"error"),this.wrongMsg.googleVerifyCode=V().findKey(e,["param","googleVerifyCode"]),console.log(this.wrongMsg.googleVerifyCode),void 0!==this.wrongMsg.googleVerifyCode&&this.$swal.fire("登入失敗!",`${o.data.msg.googleVerifyCode.msg}`,"error"),this.reload_Captcha()):(console.log(o.data.msg),this.$swal.fire("登入失敗!",`${o.data.msg}`,"error"),this.reload_Captcha())}))},reflesh_captcha(){this.$http.get(`/captcha.svg?=${(new Date).getTime()}`).then((o=>{console.log(o.img)}))},reload_Captcha(){this.isRouterAlive=!1,this.$nextTick((()=>{this.isRouterAlive=!0,this.reflesh_captcha()}))}},created(){this.reflesh_captcha(),this.getSiteInfo()}},F=a(89);const G=(0,F.Z)(D,[["render",C],["__scopeId","data-v-41706fc5"]]);var L=G}}]);
//# sourceMappingURL=985.d5958ac2.js.map