"use strict";(self["webpackChunkwaffle_backend"]=self["webpackChunkwaffle_backend"]||[]).push([[630],{2630:function(o,a,s){s.r(a),s.d(a,{default:function(){return L}});var e=s(3396),t=s(9242);const l=o=>((0,e.dD)("data-v-54a21f84"),o=o(),(0,e.Cn)(),o),r={class:"container mt-5"},n=["src"],i=l((()=>(0,e._)("p",{class:"mt-5 text-white fs-2"},"歡迎回來 !",-1))),g={class:"d-flex align-items-center"},d=["src"],h=l((()=>(0,e._)("span",null,null,-1))),c=l((()=>(0,e._)("span",null,null,-1))),p=l((()=>(0,e._)("span",null,null,-1))),m=l((()=>(0,e._)("span",null,null,-1))),u=l((()=>(0,e._)("span",null,null,-1))),w=l((()=>(0,e._)("span",null,null,-1))),f=l((()=>(0,e._)("span",null,null,-1))),_=l((()=>(0,e._)("span",null,null,-1))),$=l((()=>(0,e._)("span",null,null,-1))),y=l((()=>(0,e._)("span",null,null,-1))),M=l((()=>(0,e._)("span",null,null,-1))),k=l((()=>(0,e._)("span",null,null,-1)));function v(o,a,s,l,v,C){const V=(0,e.up)("el-input"),D=(0,e.up)("el-form-item"),F=(0,e.up)("el-form");return(0,e.wg)(),(0,e.iD)("div",r,[(0,e.Wm)(F,{ref:"addBank_Form",model:v.addForm_Data,rules:v.rules,class:"demo-ruleForm d-flex flex-column align-items-center justify-content-center"},{default:(0,e.w5)((()=>[(0,e._)("img",{src:v.logoSrc,alt:"#",style:{width:"200px",height:"200px","border-radius":"50%"}},null,8,n),i,(0,e.Wm)(D,{label:"帳號",prop:"phone",class:"addInput_style"},{default:(0,e.w5)((()=>[(0,e.Wm)(V,{class:"contentName_style",modelValue:v.addForm_Data.phone,"onUpdate:modelValue":a[0]||(a[0]=o=>v.addForm_Data.phone=o),placeholder:"請輸入"},null,8,["modelValue"])])),_:1}),(0,e.Wm)(D,{label:"密碼",prop:"password",class:"addInput_style"},{default:(0,e.w5)((()=>[(0,e.Wm)(V,{class:"contentName_style",modelValue:v.addForm_Data.password,"onUpdate:modelValue":a[1]||(a[1]=o=>v.addForm_Data.password=o),placeholder:"請輸入",type:"password"},null,8,["modelValue"])])),_:1}),(0,e._)("div",g,[(0,e.Wm)(D,{label:"驗證碼",prop:"captcha",class:"captchaInput_style"},{default:(0,e.w5)((()=>[(0,e.Wm)(V,{class:"contentName_style",modelValue:v.addForm_Data.captcha,"onUpdate:modelValue":a[2]||(a[2]=o=>v.addForm_Data.captcha=o),placeholder:"請輸入"},null,8,["modelValue"])])),_:1}),(0,e._)("div",{onClick:a[3]||(a[3]=o=>C.reload_Captcha()),onKeydown:a[4]||(a[4]=o=>C.reload_Captcha())},[v.isRouterAlive?((0,e.wg)(),(0,e.iD)("img",{key:0,src:`/captcha.svg?=${(new Date).getTime()}`,alt:"#"},null,8,d)):(0,e.kq)("",!0)],32)]),!0===v.isGoogleLogin?((0,e.wg)(),(0,e.j4)(D,{key:0,label:"Google驗證碼",prop:"googleVerifyCode",class:"addInput_style"},{default:(0,e.w5)((()=>[(0,e.Wm)(V,{class:"contentName_style",modelValue:v.addForm_Data.googleVerifyCode,"onUpdate:modelValue":a[5]||(a[5]=o=>v.addForm_Data.googleVerifyCode=o),placeholder:"請輸入",type:"password"},null,8,["modelValue"])])),_:1})):(0,e.kq)("",!0),null===v.isGoogleLogin?((0,e.wg)(),(0,e.iD)("a",{key:1,href:"#",class:"px-5",onClick:a[6]||(a[6]=(0,t.iM)((o=>C.login()),["prevent"]))},[h,c,p,m,(0,e.Uk)(" 登入 ")])):(0,e.kq)("",!0),!1===v.isGoogleLogin?((0,e.wg)(),(0,e.iD)("a",{key:2,href:"#",class:"px-5",onClick:a[7]||(a[7]=(0,t.iM)((o=>C.login()),["prevent"]))},[u,w,f,_,(0,e.Uk)(" 登入 ")])):(0,e.kq)("",!0),!0===v.isGoogleLogin?((0,e.wg)(),(0,e.iD)("a",{key:3,href:"#",class:"px-5",onClick:a[8]||(a[8]=(0,t.iM)((o=>C.login_withGoogle()),["prevent"]))},[$,y,M,k,(0,e.Uk)(" 登入 ")])):(0,e.kq)("",!0)])),_:1},8,["model","rules"])])}s(7658);var C=s(4806),V=s.n(C),D={provide(){return{reload_captcha:this.reload_Captcha}},data(){return{isRouterAlive:!0,addForm_Data:{phone:"",password:"",captcha:"",googleVerifyCode:null},logoSrc:"",googleForm_data:{phone:""},isGoogleLogin:null,rules:{phone:[{required:!0,message:"請輸入帳號",trigger:"blur"}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}],captcha:[{required:!0,message:"請輸入驗證碼",trigger:"blur"}]},wrongMsg:{phone:"",password:"",captcha:"",googleVerifyCode:""}}},methods:{getSiteInfo(){this.$http.get("/open/siteInfo").then((o=>{console.log(o.data.data),this.logoSrc=o.data.data.logo}))},checkGoogleLogin(){this.$http.post("/open/checkIsGoogleLogin",this.googleForm_data).then((o=>{console.log(o.data.data),this.isGoogleLogin=o.data.data.isGoogleLogin}))},login(){this.googleForm_data.phone=this.addForm_Data.phone,this.checkGoogleLogin(),this.$http.post("/open/login",this.addForm_Data).then((o=>{const a=o.data.msg;console.log(this.isGoogleLogin,"驗證碼是否啟動"),!1===this.isGoogleLogin&&(200===o.data.code?(console.log(o.data.msg),this.$swal.fire("登入成功!","登入成功","success"),this.$router.push("/")):422===o.data.code?(this.wrongMsg.phone=V().findKey(a,["param","phone"]),console.log(this.wrongMsg.phone),void 0!==this.wrongMsg.phone&&this.$swal.fire("登入失敗!",`${o.data.msg.phone.msg}`,"error"),this.wrongMsg.password=V().findKey(a,["param","password"]),console.log(this.wrongMsg.password),void 0!==this.wrongMsg.password&&this.$swal.fire("登入失敗!",`${o.data.msg.password.msg}`,"error"),this.wrongMsg.captcha=V().findKey(a,["param","captcha"]),console.log(this.wrongMsg.captcha),void 0!==this.wrongMsg.captcha?this.$swal.fire("登入失敗!",`${o.data.msg.captcha.msg}`,"error"):500===o.data.code&&(console.log(o.data.msg),this.$swal.fire("登入失敗!",`${o.data.msg}`,"error")),this.reload_Captcha()):(console.log(o.data.msg),this.$swal.fire("登入失敗!",`${o.data.msg}`,"error"),this.reload_Captcha())),null===this.isGoogleLogin?200===o.data.code?(console.log(o.data.msg),this.$swal.fire("登入成功!","登入成功","success"),this.$router.push("/")):422===o.data.code?(this.wrongMsg.phone=V().findKey(a,["param","phone"]),console.log(this.wrongMsg.phone),void 0!==this.wrongMsg.phone&&this.$swal.fire("登入失敗!",`${o.data.msg.phone.msg}`,"error"),this.wrongMsg.password=V().findKey(a,["param","password"]),console.log(this.wrongMsg.password),void 0!==this.wrongMsg.password&&this.$swal.fire("登入失敗!",`${o.data.msg.password.msg}`,"error"),this.wrongMsg.captcha=V().findKey(a,["param","captcha"]),console.log(this.wrongMsg.captcha),void 0!==this.wrongMsg.captcha?this.$swal.fire("登入失敗!",`${o.data.msg.captcha.msg}`,"error"):500===o.data.code&&(console.log(o.data.msg),this.$swal.fire("登入失敗!",`${o.data.msg}`,"error")),this.reload_Captcha()):(console.log(o.data.msg),this.$swal.fire("登入失敗!",`${o.data.msg}`,"error"),this.reload_Captcha()):(console.log(this.isGoogleLogin,"啟動"),this.isGoogleLogin=!0)}))},login_withGoogle(){this.$http.post("/open/login",this.addForm_Data).then((o=>{const a=o.data.msg;200===o.data.code?(console.log(o.data.msg),this.$swal.fire("登入成功!","登入成功","success"),this.$router.push("/")):422===o.data.code?(this.wrongMsg.phone=V().findKey(a,["param","phone"]),console.log(this.wrongMsg.phone),void 0!==this.wrongMsg.phone&&this.$swal.fire("登入失敗!",`${o.data.msg.phone.msg}`,"error"),this.wrongMsg.password=V().findKey(a,["param","password"]),console.log(this.wrongMsg.password),void 0!==this.wrongMsg.password&&this.$swal.fire("登入失敗!",`${o.data.msg.password.msg}`,"error"),this.wrongMsg.captcha=V().findKey(a,["param","captcha"]),console.log(this.wrongMsg.captcha),void 0!==this.wrongMsg.captcha&&this.$swal.fire("登入失敗!",`${o.data.msg.captcha.msg}`,"error"),this.wrongMsg.googleVerifyCode=V().findKey(a,["param","googleVerifyCode"]),console.log(this.wrongMsg.googleVerifyCode),void 0!==this.wrongMsg.googleVerifyCode&&this.$swal.fire("登入失敗!",`${o.data.msg.googleVerifyCode.msg}`,"error"),this.reload_Captcha()):(console.log(o.data.msg),this.$swal.fire("登入失敗!",`${o.data.msg}`,"error"),this.reload_Captcha())}))},reflesh_captcha(){this.$http.get(`/captcha.svg?=${(new Date).getTime()}`).then((o=>{console.log(o.img)}))},reload_Captcha(){this.isRouterAlive=!1,this.$nextTick((()=>{this.isRouterAlive=!0,this.reflesh_captcha()}))}},created(){this.reflesh_captcha(),this.getSiteInfo()}},F=s(89);const G=(0,F.Z)(D,[["render",v],["__scopeId","data-v-54a21f84"]]);var L=G}}]);
//# sourceMappingURL=630.bfb0f580.js.map