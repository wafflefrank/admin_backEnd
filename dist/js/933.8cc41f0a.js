"use strict";(self["webpackChunkwaffle_backend"]=self["webpackChunkwaffle_backend"]||[]).push([[933],{3933:function(e,a,l){l.r(a),l.d(a,{default:function(){return x}});var o=l(3396),t=l(7139);const s=e=>((0,o.dD)("data-v-7c4ec28c"),e=e(),(0,o.Cn)(),e),n={class:"row"},d={class:"col-12"},r={class:"card_outStyle radius-10 p-3 pb-4"},c=s((()=>(0,o._)("div",{class:"d-flex align-items-center justify-content-between mx-4"},[(0,o._)("h4",{class:"text-white d-flex flex-start my-4"},"銀行卡訊息")],-1))),i={class:"d-flex justify-content-between"},m={class:"d-flex align-items-center mx-4"},u={class:"d-flex flex-column"},b={class:"d-flex justify-content-center"},k={class:"row"},B={class:"col-12"},h={key:0,class:"card_outStyle d-flex flex-wrap radius-10 p-4"},p=["onClick","onKeydown"],g={class:"card-body"},A={class:"fw-bold"},v={key:0,class:"fw-bold"},f={key:1,class:"fw-bold"},w={key:0,class:"fw-bold"},N={key:1,class:"fw-bold"};function C(e,a,l,s,C,W){const V=(0,o.up)("el-checkbox"),_=(0,o.up)("el-button"),y=(0,o.up)("el-popconfirm"),K=(0,o.up)("el-option"),O=(0,o.up)("el-select"),I=(0,o.up)("el-input"),M=(0,o.up)("el-dialog"),D=(0,o.up)("el-col"),x=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",n,[(0,o._)("div",d,[(0,o._)("div",r,[c,(0,o._)("div",i,[(0,o._)("div",m,[(0,o.Wm)(V,{class:"checkCard_style",modelValue:C.checked2,"onUpdate:modelValue":a[0]||(a[0]=e=>C.checked2=e),onChange:a[1]||(a[1]=e=>W.test(C.checked2))},{default:(0,o.w5)((()=>[(0,o.Uk)("顯示卡號")])),_:1},8,["modelValue"])]),(0,o._)("div",u,[(0,o.Wm)(_,{color:"#faa30d",class:"search_btn px-4 fw-bold me-3",size:"default",onClick:a[2]||(a[2]=e=>W.openADD_modal())},{default:(0,o.w5)((()=>[(0,o.Uk)("新增")])),_:1}),(0,o.Wm)(y,{title:"確定要刪除此銀行卡 ?",onConfirm:a[4]||(a[4]=e=>W.confirmEvent())},{reference:(0,o.w5)((()=>[(0,o.Wm)(_,{color:"rgba(209, 49, 40, 1)",class:"mt-3 px-4 fw-bold me-3",size:"default",onClick:a[3]||(a[3]=e=>W.deleteBank())},{default:(0,o.w5)((()=>[(0,o.Uk)("刪除")])),_:1})])),_:1})]),(0,o.Wm)(M,{class:"addModel_style",modelValue:C.addBankVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>C.addBankVisible=e),title:"新增銀行卡",width:"70%",center:""},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{class:"bankName_style mt-3",modelValue:C.addForm.bankAccount,"onUpdate:modelValue":a[7]||(a[7]=e=>C.addForm.bankAccount=e),placeholder:"銀行卡號"},{prepend:(0,o.w5)((()=>[(0,o.Uk)("銀行卡號")])),append:(0,o.w5)((()=>[(0,o.Wm)(O,{class:"chooseBank_style",modelValue:C.addForm.bankName,"onUpdate:modelValue":a[5]||(a[5]=e=>C.addForm.bankName=e),placeholder:"選擇銀行",onChange:a[6]||(a[6]=e=>W.chooseBank_name(C.addForm.bankName)),clearable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(K,{label:"AGRIBANK",value:"AGRIBANK"}),(0,o.Wm)(K,{label:"BIDV",value:"BIDV"}),(0,o.Wm)(K,{label:"VIETINBANK",value:"VIETINBANK"}),(0,o.Wm)(K,{label:"VPBANK",value:"VPBANK"}),(0,o.Wm)(K,{label:"VCB",value:"VCB"}),(0,o.Wm)(K,{label:"ACB",value:"ACB"}),(0,o.Wm)(K,{label:"ABBANK",value:"ABBANK"}),(0,o.Wm)(K,{label:"NASB",value:"NASB"}),(0,o.Wm)(K,{label:"VIETCAPITAL",value:"VIETCAPITAL"}),(0,o.Wm)(K,{label:"VIB",value:"VIB"}),(0,o.Wm)(K,{label:"BVB",value:"BVB"}),(0,o.Wm)(K,{label:"LPB",value:"LPB"}),(0,o.Wm)(K,{label:"CIMB",value:"CIMB"}),(0,o.Wm)(K,{label:"PVCOMBANK",value:"PVCOMBANK"}),(0,o.Wm)(K,{label:"OCEANBANK",value:"OCEANBANK"}),(0,o.Wm)(K,{label:"GPB",value:"GPB"}),(0,o.Wm)(K,{label:"DONGABANK",value:"DONGABANK"}),(0,o.Wm)(K,{label:"SEABANK",value:"SEABANK"}),(0,o.Wm)(K,{label:"MSB",value:"MSB"}),(0,o.Wm)(K,{label:"INDOVINA",value:"INDOVINA"}),(0,o.Wm)(K,{label:"IBK",value:"IBK"}),(0,o.Wm)(K,{label:"KIENLONG",value:"KIENLONG"}),(0,o.Wm)(K,{label:"TECHCOMBANK",value:"TECHCOMBANK"}),(0,o.Wm)(K,{label:"VRB",value:"VRB"}),(0,o.Wm)(K,{label:"NAMABANK",value:"NAMABANK"}),(0,o.Wm)(K,{label:"HDB",value:"HDB"}),(0,o.Wm)(K,{label:"OCB",value:"OCB"}),(0,o.Wm)(K,{label:"PBVN",value:"PBVN"}),(0,o.Wm)(K,{label:"MB",value:"MB"}),(0,o.Wm)(K,{label:"NCB",value:"NCB"}),(0,o.Wm)(K,{label:"SHB",value:"SHB"}),(0,o.Wm)(K,{label:"SAIGONBANK",value:"SAIGONBANK"}),(0,o.Wm)(K,{label:"SACOMBANK",value:"SACOMBANK"}),(0,o.Wm)(K,{label:"TPBANK",value:"TPBANK"}),(0,o.Wm)(K,{label:"UOB",value:"UOB"}),(0,o.Wm)(K,{label:"VAB",value:"VAB"}),(0,o.Wm)(K,{label:"VIETBANK",value:"VIETBANK"}),(0,o.Wm)(K,{label:"WOORIBANK",value:"WOORIBANK"}),(0,o.Wm)(K,{label:"PGBANK",value:"PGBANK"}),(0,o.Wm)(K,{label:"EXIMBANK",value:"EXIMBANK"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"]),(0,o.Wm)(I,{class:"addInfo_style mt-3",modelValue:C.addForm.bankOwner,"onUpdate:modelValue":a[8]||(a[8]=e=>C.addForm.bankOwner=e),placeholder:"持卡人"},{prepend:(0,o.w5)((()=>[(0,o.Uk)("持卡人")])),_:1},8,["modelValue"]),(0,o.Wm)(I,{class:"addInfo_style mt-3",modelValue:C.addForm.googleVerifyCode,"onUpdate:modelValue":a[9]||(a[9]=e=>C.addForm.googleVerifyCode=e),placeholder:"Goole驗證碼"},{prepend:(0,o.w5)((()=>[(0,o.Uk)("Goole驗證碼")])),_:1},8,["modelValue"]),(0,o._)("div",b,[(0,o.Wm)(_,{color:"#faa30d",class:"save_btn p-4 mt-4 fw-bold fs-5 align-self-center",size:"default",onClick:a[10]||(a[10]=e=>W.saveBank())},{default:(0,o.w5)((()=>[(0,o.Uk)("保存")])),_:1})])])),_:1},8,["modelValue"])])])])]),(0,o._)("div",k,[(0,o._)("div",B,[C.isRouterAlive?((0,o.wg)(),(0,o.iD)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(C.bankCard,(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,t.C_)(["bankCard_style my-2 mx-4",C.active===e.id?"active":""]),key:e,onClick:a=>W.clickScript(e),onKeydown:a=>W.clickScript(e)},[(0,o._)("div",g,[(0,o.Wm)(x,{class:"mt-3"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{span:24},{default:(0,o.w5)((()=>[(0,o._)("span",A,(0,t.zw)(e.bankName),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(x,{class:"text-start",style:{"margin-top":"80px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{span:24},{default:(0,o.w5)((()=>[!0===C.checked2?((0,o.wg)(),(0,o.iD)("span",v,(0,t.zw)(e.bankOwner),1)):(0,o.kq)("",!0),!1===C.checked2?((0,o.wg)(),(0,o.iD)("span",f,(0,t.zw)(e.replaceBankOwner),1)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024),(0,o.Wm)(x,{class:"mt-1 text-start"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{span:24},{default:(0,o.w5)((()=>[!0===C.checked2?((0,o.wg)(),(0,o.iD)("span",w,(0,t.zw)(e.bankAccount),1)):(0,o.kq)("",!0),!1===C.checked2?((0,o.wg)(),(0,o.iD)("span",N,(0,t.zw)(e.replaceBankAccount),1)):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024)])],42,p)))),128))])):(0,o.kq)("",!0)])])],64)}var W=l(4806),V=l.n(W),_=l(7178),y=l(6797),K=l.n(y);const O=K()(new Date).utc().format();var I={data(){return{isRouterAlive:!0,checked2:!0,loading_table:!1,loading:!1,childBorder:!0,addBankVisible:!1,addForm:{bankName:"",bankAccount:"",bankOwner:"",googleVerifyCode:"",bankType:"1"},errorMsg:{bankAccount:"",bankName:"",bankOwner:"",googleVerifyCode:""},bankCard:[],active:"",deleteBank_choose:{id:""}}},methods:{getBankList(){this.$http.get("/api/getMyBanks").then((e=>{console.log(e.data.data),this.bankCard=e.data.data}))},formatPaidStatus(e){return"order"===e?"訂單":"interCharge"===e?"內充":"結算"},formatisGotReceipt(e){return 1===e?"已收到回執":0===e?"暫無回執":"備用"},formatisPaid(e){return 1===e?"已支付":0===e?"未支付":"備用"},formatbillType(e){return 1===e?"已結算":0===e?"未結算":"備用"},searchDate(e){console.log(O),console.log(e),"訂單"===e&&(this.searchOption.type="order"),"內充"===e&&(this.searchOption.type="interCharge"),"結算"===e&&(this.searchOption.type="bill"),this.doSearch()},stateFormat(e,a,l){let o=l;return o+="",o.includes(".")||(o+="."),o.replace(/(\d)(?=(\d{3})+\.)/g,((e,a)=>`${a},`)).replace(/\.$/,"")},chooseBank_name(e){console.log(e),this.addForm.bankName=e},test(e){console.log(e),!1===e&&V().forEach(this.bankCard,((e,a)=>(this.bankCard[a].replaceBankOwner=e.bankOwner.replace(e.bankOwner.substr(3,4),"****"),this.bankCard[a].replaceBankAccount=e.bankAccount.replace(e.bankAccount.substr(3,4),"****"),this.bankCard)))},clickScript(e){this.active=e.id,console.log(e.id),console.log(e)},openADD_modal(){this.addBankVisible=!0},saveBank(){this.$http.post("/api/addMyBank",this.addForm).then((e=>{console.log(e.data.code),console.log(e.data.msg);const a=e.data.msg;200===e.data.code?(this.addBankVisible=!1,this.reload_bankList(),this.$swal.fire("新增成功!","新增成功","success")):422===e.data.code?(this.errorMsg.bankAccount=V().findKey(a,["param","bankAccount"]),console.log(this.errorMsg.bankAccount),void 0!==this.errorMsg.bankAccount&&(0,_.z8)({showClose:!0,message:`${e.data.msg.bankAccount.msg}`,type:"error"}),this.errorMsg.bankName=V().findKey(a,["param","bankName"]),console.log(this.errorMsg.bankName),void 0!==this.errorMsg.bankName&&(0,_.z8)({showClose:!0,message:`${e.data.msg.bankName.msg}`,type:"error"}),this.errorMsg.bankOwner=V().findKey(a,["param","bankOwner"]),console.log(this.errorMsg.bankOwner),void 0!==this.errorMsg.bankOwner&&(0,_.z8)({showClose:!0,message:`${e.data.msg.bankOwner.msg}`,type:"error"}),this.errorMsg.googleVerifyCode=V().findKey(a,["param","googleVerifyCode"]),console.log(this.wrongMsg),void 0!==this.errorMsg.googleVerifyCode&&(0,_.z8)({showClose:!0,message:`${e.data.msg.googleVerifyCode.msg}`,type:"error"})):(0,_.z8)({showClose:!0,message:"Google驗證碼有誤",type:"error"})}))},deleteBank(){},confirmEvent(){""===this.active?(0,_.z8)({showClose:!0,message:"請至少選擇一張銀行卡",type:"warning"}):""!==this.active&&(this.deleteBank_choose.id=this.active,this.$http.post("/api/deleteMyBank",this.deleteBank_choose).then((e=>(console.log(e.data.code),this.$swal.fire("刪除成功!",`${e.data.msg}`,"success"),this.reload_bankList(),this.active="",this.active))))},reload_bankList(){this.isRouterAlive=!1,this.$nextTick((()=>{this.isRouterAlive=!0,this.getBankList()}))}},created(){this.getBankList()}},M=l(89);const D=(0,M.Z)(I,[["render",C],["__scopeId","data-v-7c4ec28c"]]);var x=D}}]);
//# sourceMappingURL=933.8cc41f0a.js.map